@model List<GearGauge.ViewModels.CanonicalSearchViewModel>

@* <!DOCTYPE html>
<html>
<head>
    <title>Search Results</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <h1>Search Results</h1>
    @if (Model.Any())
    {
        <select id="searchResults">
            @foreach (var item in Model)
            {
                <option value="@item.CanonicalProductId">@item.Title</option>
            }
        </select>

        <div id="priceData">
            </div>

        <script>
            $(document).ready(function () {
                $("#searchResults").change(function () {
                    var selectedProductId = $(this).val();
                    getPriceData(selectedProductId);
                });
            });

            function getPriceData(productId) {
                $.ajax({
                    url: '/ProductSearch/PostGetPriceGuide', // Update URL as needed
                    dataType: 'json',
                    data: { canonicalProductId: productId },
                    success: function (data) {
                        if (data.Count > 0) {
                            var price = data[0].PriceRecommendation.PriceMiddle; // Assuming first element
                            $("#priceData").html("Price (Middle): $" + price.Amount);
                        } else {
                            $("#priceData").html("No price information found.");
                        }
                    },
                    error: function () {
                        $("#priceData").html("Error fetching price data.");
                    }
                });
            }
        </script>
    }
    else
    {
        <p>No results found.</p>
    }
</body>
</html> *@

<!DOCTYPE html>
<html>
<head>
    <title>Search Results</title>
</head>
<body>
    <h1>Search Results</h1>
    @if (Model.Any())
    {
        <select id="searchResults">
            @foreach (var item in Model)
            {
                <option value="@item.CanonicalProductIds[0]">
                    @if (item.Title != null)
                    {
                        @item.Title
                    }
                </option>
            }
        </select>
        <div id="productDetails"></div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script>
            $(document).ready(function () {
                $("#searchResults").change(function () {
                    var selectedProductId = $(this).val();
                    // Call a function to handle selection and update product details
                    getProductDetails(selectedProductId);
                });
            });

            function getProductDetails(productId) {
                // Implement logic to retrieve and display product details based on productId
            }
        </script>
    }
    else
    {
        <p>No results found.</p>
    }
</body>
</html>
